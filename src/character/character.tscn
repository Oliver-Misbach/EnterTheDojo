[gd_scene load_steps=19 format=3 uid="uid://csmkwv7sbo713"]

[ext_resource type="Script" path="res://src/character/character.gd" id="1_feilg"]
[ext_resource type="Texture2D" uid="uid://cbveomv0sowod" path="res://src/icon.svg" id="2_l4r3p"]
[ext_resource type="PackedScene" uid="uid://mnj15h0sy3t8" path="res://assets/3D Assets/Character Models/Player Character Model/Player_Character.glb" id="3_f6hel"]
[ext_resource type="Texture2D" uid="uid://begp75ina37qx" path="res://assets/3D Assets/Character Models/Player Character Model/Player_Character_basecolor_skin.png" id="4_rubme"]
[ext_resource type="Texture2D" uid="uid://dwhurebebltbi" path="res://assets/3D Assets/Character Models/Player Character Model/Player_Character_basecolor_black.png" id="5_daxvm"]
[ext_resource type="Texture2D" uid="uid://djbcisd3bjcvs" path="res://assets/3D Assets/Character Models/Player Character Model/Player_Character_basecolor_player_clothes.png" id="6_agcg2"]
[ext_resource type="Texture2D" uid="uid://8nkd0yxej538" path="res://assets/3D Assets/Character Models/Player Character Model/Player_Character_basecolor_headband.png" id="7_d24hr"]
[ext_resource type="Script" path="res://src/state_machine/state_machine.gd" id="8_un5e1"]
[ext_resource type="Script" path="res://src/character/state/idle.gd" id="9_cxhtl"]
[ext_resource type="Script" path="res://src/character/state/attack.gd" id="10_32dq6"]
[ext_resource type="Script" path="res://src/character/state/hurt.gd" id="11_f23wp"]
[ext_resource type="Script" path="res://src/character/state/death.gd" id="12_u8qc8"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_f2bci"]
size = Vector2(56, 56)

[sub_resource type="CircleShape2D" id="CircleShape2D_2d0kn"]
radius = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7576j"]
resource_name = "Skin"
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("4_rubme")
roughness = 0.4

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dhpjx"]
resource_name = "Black"
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("5_daxvm")
roughness = 0.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7wkj3"]
resource_name = "Gi"
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("6_agcg2")
roughness = 0.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xfpa7"]
resource_name = "Headband"
vertex_color_use_as_albedo = true
albedo_texture = ExtResource("7_d24hr")
roughness = 0.5

[node name="Character" type="CharacterBody2D"]
script = ExtResource("1_feilg")
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_f2bci")

[node name="Sprite2D" type="Sprite2D" parent="."]
scale = Vector2(0.438, 0.438)
texture = ExtResource("2_l4r3p")

[node name="HurtArea" type="Area2D" parent="."]
position = Vector2(28, 0)
metadata/_edit_group_ = true

[node name="CollisionShape2D" type="CollisionShape2D" parent="HurtArea"]
shape = SubResource("CircleShape2D_2d0kn")

[node name="Player_Character" parent="." instance=ExtResource("3_f6hel")]

[node name="Karate_Man_Rig" parent="Player_Character" index="0"]
transform = Transform3D(4.37114e-08, 0, 1, 0, 0.884, 0, 1, 0, -4.37114e-08, 0, 0, 0)

[node name="Skeleton3D" parent="Player_Character/Karate_Man_Rig" index="0"]
bones/0/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(-0.409336, 2.0897e-15, 0.912384, -4.64436e-15)
bones/3/rotation = Quaternion(0.999839, 4.44161e-16, -0.0179412, -2.48313e-07)
bones/3/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(-3.89808e-16, 0.016635, 1.63694e-16, 0.999862)
bones/6/rotation = Quaternion(1.98655e-07, -0.0166347, -3.30501e-09, 0.999862)
bones/7/scale = Vector3(1, 1, 1)
bones/8/rotation = Quaternion(-0.436128, -2.32383e-15, 0.899885, -1.71048e-16)
bones/8/scale = Vector3(1, 1, 1)
bones/9/rotation = Quaternion(-0.743624, 2.09884e-07, 5.61421e-08, 0.668598)
bones/10/rotation = Quaternion(0.0465496, -6.9631e-14, 1.10983e-08, 0.998916)
bones/11/rotation = Quaternion(0.0390498, -2.38237e-07, 4.44428e-15, 0.999237)
bones/12/rotation = Quaternion(0.0536856, -1.19037e-07, -1.91995e-08, 0.998558)
bones/12/scale = Vector3(1, 1, 1)
bones/13/scale = Vector3(1, 1, 1)
bones/14/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(-0.174466, 0.76168, 0.0889071, 0.617658)
bones/16/rotation = Quaternion(0.15116, 0.0290065, -0.00235948, 0.988081)
bones/16/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(-0.106146, -0.0152801, 0.0327658, 0.993693)
bones/18/rotation = Quaternion(0.0148989, 0.000398379, -0.0229717, 0.999625)
bones/18/scale = Vector3(1, 1, 1)
bones/21/rotation = Quaternion(0.115003, 0.0227239, -0.185812, 0.975567)
bones/21/scale = Vector3(1, 1, 1)
bones/22/scale = Vector3(1, 1, 1)
bones/23/rotation = Quaternion(0.672607, -0.439241, -0.545342, -0.239309)
bones/23/scale = Vector3(1, 1, 1)
bones/24/rotation = Quaternion(-0.174466, -0.761679, -0.088907, 0.617658)
bones/25/rotation = Quaternion(0.15116, -0.0290065, 0.00235953, 0.988081)
bones/25/scale = Vector3(1, 1, 1)
bones/26/rotation = Quaternion(-0.106146, 0.0152801, -0.0327658, 0.993693)
bones/26/scale = Vector3(1, 1, 1)
bones/27/rotation = Quaternion(0.0148989, -0.000398373, 0.0229717, 0.999625)
bones/31/scale = Vector3(1, 1, 1)
bones/32/rotation = Quaternion(0.999483, 0.00896736, 0.00900712, 0.0295212)
bones/32/scale = Vector3(1, 1, 1)
bones/33/rotation = Quaternion(0.14783, 0.000988527, 0.00245946, 0.989009)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.47566, 0.00527718, 0.0508842, 0.878141)
bones/35/rotation = Quaternion(0.0430321, 0.936373, -0.347491, -0.024581)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(0.999483, -0.00896739, -0.0090069, 0.0295212)
bones/36/scale = Vector3(1, 1, 1)
bones/37/rotation = Quaternion(0.14783, -0.000988501, -0.00245948, 0.989009)
bones/37/scale = Vector3(1, 1, 1)
bones/38/rotation = Quaternion(-0.47566, -0.00527718, -0.0508842, 0.878141)
bones/38/scale = Vector3(1, 1, 1)
bones/39/rotation = Quaternion(-0.043032, 0.936373, -0.347492, 0.024581)
bones/39/scale = Vector3(1, 1, 1)
bones/40/rotation = Quaternion(-0.45454, -0.490322, -0.545344, 0.505546)
bones/40/scale = Vector3(1, 1, 1)

[node name="Karate_Man" parent="Player_Character/Karate_Man_Rig/Skeleton3D" index="0"]
surface_material_override/0 = SubResource("StandardMaterial3D_7576j")
surface_material_override/1 = SubResource("StandardMaterial3D_dhpjx")
surface_material_override/2 = SubResource("StandardMaterial3D_7wkj3")
surface_material_override/3 = SubResource("StandardMaterial3D_xfpa7")

[node name="AnimationPlayer" parent="Player_Character" index="1"]
playback_default_blend_time = 0.2

[node name="DebugLabel" type="Label3D" parent="Player_Character"]
process_mode = 4
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
billboard = 2

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("current")]
script = ExtResource("8_un5e1")
current = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("character")]
script = ExtResource("9_cxhtl")
character = NodePath("../..")

[node name="Attack" type="Node" parent="StateMachine" node_paths=PackedStringArray("character")]
script = ExtResource("10_32dq6")
character = NodePath("../..")

[node name="HitTimer" type="Timer" parent="StateMachine/Attack"]
one_shot = true

[node name="Timer" type="Timer" parent="StateMachine/Attack"]
one_shot = true

[node name="Hurt" type="Node" parent="StateMachine" node_paths=PackedStringArray("character")]
script = ExtResource("11_f23wp")
character = NodePath("../..")

[node name="Timer" type="Timer" parent="StateMachine/Hurt"]
wait_time = 0.5
one_shot = true

[node name="Death" type="Node" parent="StateMachine" node_paths=PackedStringArray("character")]
script = ExtResource("12_u8qc8")
character = NodePath("../..")

[node name="Timer" type="Timer" parent="StateMachine/Death"]
wait_time = 0.9
one_shot = true

[connection signal="timeout" from="StateMachine/Attack/HitTimer" to="StateMachine/Attack" method="_on_hit_timer_timeout"]
[connection signal="timeout" from="StateMachine/Attack/Timer" to="StateMachine/Attack" method="_on_timer_timeout"]
[connection signal="timeout" from="StateMachine/Hurt/Timer" to="StateMachine/Hurt" method="_on_timer_timeout"]
[connection signal="timeout" from="StateMachine/Death/Timer" to="StateMachine/Death" method="_on_timer_timeout"]

[editable path="Player_Character"]
